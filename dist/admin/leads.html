<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>접수내역 - 은인자금파트너스</title>
  <link rel="stylesheet" href="../css/dashboard.css">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/orioncactus/pretendard/dist/web/static/pretendard.css">
  <script src="../js/admin-auth.js"></script>

  <!-- Google Analytics (TODO: 측정 ID 입력) -->
  <!--
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-XXXXXXXXXX"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());
    gtag('config', 'G-XXXXXXXXXX');
  </script>
  -->
</head>
<body>
  <div class="dashboard-container">
    <!-- 사이드바 -->
    <div class="sidebar-overlay" onclick="toggleSidebar()"></div>
    <aside class="sidebar">
      <div class="sidebar-header">
        <h1 class="logo">은인자금파트너스</h1>
        <span class="logo-sub">관리자</span>
      </div>
      <nav class="sidebar-nav">
        <a href="/admin/" class="nav-item"><span class="nav-icon"><svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><rect x="3" y="3" width="7" height="7"/><rect x="14" y="3" width="7" height="7"/><rect x="14" y="14" width="7" height="7"/><rect x="3" y="14" width="7" height="7"/></svg></span><span class="nav-text">대시보드</span></a>
        <a href="/admin/leads" class="nav-item active"><span class="nav-icon"><svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polyline points="22 12 16 12 14 15 10 15 8 12 2 12"/><path d="M5.45 5.11L2 12v6a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-6l-3.45-6.89A2 2 0 0 0 16.76 4H7.24a2 2 0 0 0-1.79 1.11z"/></svg></span><span class="nav-text">접수내역</span></a>
        <a href="/admin/board" class="nav-item"><span class="nav-icon"><svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"/><path d="M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"/></svg></span><span class="nav-text">게시판 관리</span></a>
        <a href="/admin/analytics" class="nav-item"><span class="nav-icon"><svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><line x1="18" y1="20" x2="18" y2="10"/><line x1="12" y1="20" x2="12" y2="4"/><line x1="6" y1="20" x2="6" y2="14"/></svg></span><span class="nav-text">방문통계</span></a>
        <a href="/admin/settings" class="nav-item"><span class="nav-icon"><svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="12" r="3"/><path d="M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z"/></svg></span><span class="nav-text">설정</span></a>
      </nav>
      <div class="sidebar-footer">
        <a href="../index.html" class="nav-item"><span class="nav-icon"><svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"/><polyline points="9 22 9 12 15 12 15 22"/></svg></span><span class="nav-text">사이트 보기</span></a>
      </div>
    </aside>

    <!-- 메인 콘텐츠 -->
    <main class="main-content">
      <!-- 헤더 -->
      <header class="dashboard-header">
      <button class="mobile-menu-btn" onclick="toggleSidebar()">
        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><line x1="3" y1="12" x2="21" y2="12"/><line x1="3" y1="6" x2="21" y2="6"/><line x1="3" y1="18" x2="21" y2="18"/></svg>
      </button></header>

      <!-- 필터 & 검색 -->
      <section class="filter-section">
        <div class="filter-row">
          <div class="filter-group">
            <select class="filter-select" id="statusFilter">
              <option value="">전체 상태</option>
              <option value="pending">대기중</option>
              <option value="progress">상담중</option>
              <option value="complete">완료</option>
              <option value="cancel">취소</option>
            </select>
            <select class="filter-select" id="dateFilter">
              <option value="7">최근 7일</option>
              <option value="30">최근 30일</option>
              <option value="90">최근 90일</option>
              <option value="all">전체</option>
            </select>
          </div>
          <div class="search-group">
            <input type="text" class="search-input" id="searchInput" placeholder="이름, 연락처, 회사명 검색...">
            <button class="btn-search" onclick="searchLeads()">
              <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <circle cx="11" cy="11" r="8"/>
                <line x1="21" y1="21" x2="16.65" y2="16.65"/>
              </svg>
            </button>
          </div>
        </div>
        <div class="filter-summary">
          <span>총 <strong id="totalCount">24</strong>건</span>
          <button class="btn-export" onclick="exportToExcel()">
            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/>
              <polyline points="7 10 12 15 17 10"/>
              <line x1="12" y1="15" x2="12" y2="3"/>
            </svg>
            엑셀 다운로드
          </button>
        </div>
      </section>

      <!-- 접수 목록 테이블 -->
      <section class="leads-section">
        <div class="table-container">
          <table class="data-table leads-table">
            <thead>
              <tr>
                <th><input type="checkbox" id="selectAll" onchange="toggleSelectAll()"></th>
                <th>접수일</th>
                <th>이름</th>
                <th>연락처</th>
                <th>회사명</th>
                <th>업종</th>
                <th>지역</th>
                <th>통화가능</th>
                <th>직전매출</th>
                <th>희망금액</th>
                <th>상태</th>
                <th>메모</th>
                <th>관리</th>
              </tr>
            </thead>
            <tbody id="leadsTableBody">
              <tr>
                <td colspan="13" style="text-align: center; padding: 40px; color: var(--neutral-400);">
                  데이터를 불러오는 중...
                </td>
              </tr>
            </tbody>
          </table>
        </div>

        <!-- 페이지네이션 -->
        <div class="pagination">
          <button class="pagination-btn" disabled>
            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <polyline points="15 18 9 12 15 6"/>
            </svg>
          </button>
          <span class="pagination-info">1 / 5 페이지</span>
          <button class="pagination-btn">
            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <polyline points="9 18 15 12 9 6"/>
            </svg>
          </button>
        </div>
      </section>

    </main>
  </div>

  <!-- 상세보기 모달 -->
  <div class="modal-overlay" id="detailModal">
    <div class="modal modal-lg">
      <div class="modal-header">
        <h3 class="modal-title">접수 상세 정보</h3>
        <button class="modal-close" onclick="closeDetailModal()">
          <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <line x1="18" y1="6" x2="6" y2="18"/>
            <line x1="6" y1="6" x2="18" y2="18"/>
          </svg>
        </button>
      </div>
      <div class="modal-body">
        <div class="detail-grid">
          <div class="detail-item">
            <label>접수일시</label>
            <span id="detailDate">-</span>
          </div>
          <div class="detail-item">
            <label>이름</label>
            <span id="detailName">-</span>
          </div>
          <div class="detail-item">
            <label>연락처</label>
            <span id="detailPhone">-</span>
          </div>
          <div class="detail-item">
            <label>이메일</label>
            <span id="detailEmail">-</span>
          </div>
          <div class="detail-item">
            <label>회사명</label>
            <span id="detailCompany">-</span>
          </div>
          <div class="detail-item">
            <label>업종</label>
            <span id="detailBusiness">-</span>
          </div>
          <div class="detail-item">
            <label>사업자번호</label>
            <span id="detailBizNo">-</span>
          </div>
          <div class="detail-item">
            <label>희망금액</label>
            <span id="detailAmount">-</span>
          </div>
          <div class="detail-item">
            <label>지역</label>
            <span id="detailRegion">-</span>
          </div>
          <div class="detail-item">
            <label>통화가능시간</label>
            <span id="detailCallTime">-</span>
          </div>
          <div class="detail-item">
            <label>직전년도매출</label>
            <span id="detailRevenue">-</span>
          </div>
          <div class="detail-item full-width">
            <label>상담내용</label>
            <p id="detailContent">-</p>
          </div>
        </div>
      </div>
      <div class="modal-footer">
        <button class="btn-secondary" onclick="closeDetailModal()">닫기</button>
        <button class="btn-primary" onclick="callCustomer()">
          <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z"/>
          </svg>
          전화걸기
        </button>
      </div>
    </div>
  </div>

  <script src="../js/components.js"></script>
  <script src="../js/leads.js"></script>
<script>
function toggleSidebar() {
  document.querySelector(".sidebar").classList.toggle("open");
  document.querySelector(".sidebar-overlay").classList.toggle("open");
}
</script>
</body>
</html>
